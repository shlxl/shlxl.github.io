---
title: 进展备忘录
date: 2025/09/14 16:30:00
description: 梳理近期改动：站点基建、部署、时间显示一致性（绝对时间）、组件覆盖与样式修复，并列出后续计划。
tags: 进展,变更记录
categories: 工程实践
aliases:
  - /blog/progress-20250914.html
  - /blog/progress-20250914
cover: /images/progress-20250914.svg
publish: true
---

本备忘录记录当前阶段的主要工作与结论，便于后续迭代与排障参考。

## 已完成

- 站点基建
  - 基于 VitePress + @sugarat/theme 初始化站点结构（首页/关于/作品集/博客）。
  - 自定义样式：品牌色、卡片阴影、封面样式与响应式优化。
- 部署发布
  - GitHub Actions 工作流 + GitHub Pages（用户主页仓库）。
  - base 由环境变量控制；用户主页使用根路径 `/`。
- 时间显示一致性（重点）
  - 问题：相对时间在 SSR 与客户端计算不一致，且 CI 环境与本地时区差异导致“8 小时偏移”。
  - 方案：
    - 统一为“绝对时间”字符串（`yyyy/MM/dd HH:mm`），不再渲染“x 小时前”。
    - 主题配置 `timeZone: 0`，使 pagesData.meta.date 等于 frontmatter，避免 CI 二次偏移。
    - 本地覆盖主题时间相关组件（SSR + 客户端同一实现）：
      - BlogItem（列表项）、BlogArticleAnalyze（文章信息）、BlogHotArticle（热门）、BlogRecommendArticle（相关文章）。
    - Vite 插件拦截主题内部相对导入（resolveId），确保实际加载本地覆盖版本。
- 博客内容整理
  - 保留并置顶“站点内容脚手架与发布全指南”（top: 1），作为常驻入口。
  - 清理其余示例文章（不再隐藏，已移除）。
- 其它修复
  - 恢复中文配置（导航/标题/标语等乱码问题）。
  - 开发态将 `/favicon.ico` 映射为 SVG，消除 404 噪音。
  - 增加内联 SVG 图标（热门/相关文章标题），避免外链资源导致闪烁。

## 现状结论

- 博客列表、文章信息、热门与相关文章均显示绝对时间，SSR 与客户端一致，不再出现“8 小时前”或水合报错。
- 列表卡片标题与时间仅展示一遍；卡片阴影、分隔符、封面预览恢复正常。

## 后续计划（建议）

- 内容生产
  - 用脚手架 `npm run new:post "标题" -- --tags A,B --cat 分类 --desc "摘要"` 快速新增文章。
  - 文章 frontmatter 日期请统一为 `yyyy/MM/dd HH:mm:ss`（斜杠格式）。
- 工具与质量
  - 新增 `lint:dates`（校验日期格式、提醒不规范 frontmatter）。
  - 新增 `new:work` 脚手架（自动往作品集追加卡片 + 可选封面）。
  - 可选 PR 预览（每个 PR 构建独立预览环境）。
- 展示增强
  - 相关文章筛选策略可切换为按 tags/categories 更严格匹配。
  - 列表/侧栏可加标签过滤与归档。

## Markdown 编辑技巧速查

- 主标题仅保留一处（H1），正文从 `## H2` 开始；中文列表每项尽量一行，必要时行尾加两个空格换行。
- 代码块指定语言高亮：
  ```ts
  export function hello(name: string) {
    return `Hi, ${name}`
  }
  ```
- 容器提示：
  ::: tip 小技巧\n这里是提示内容\n:::\n::: warning 注意\n操作前请先备份\n:::
- 图片：放 `docs/public/images/`，以 `/images/xxx.png` 引用；需要控制布局可使用少量 HTML。
- 站外链接：`target="_blank" rel="noreferrer"`；站内链接用相对或以 `/` 开头的路径。
