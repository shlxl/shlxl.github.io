---
title: 记一次与 AI 结对编程的奇妙经历：CSS 滚动条的“地狱”调试
date: 2025-10-11
description: 一次看似简单的 CSS 滚动条 bug，却带我与 AI 助手经历了一场长达数小时、曲折离奇的调试之旅。本文复盘了整个过程，从错误的假设到柳暗花明，最终揭示了问题的本质，并对 CSS、组件化和 AI 协作的边界进行了思考。
tags: ["CSS", "VitePress", "AI", "结对编程", "调试", "Debug"]
categories:
  - 工程实践
publish: true
draft: false
---

## 问题的起点：一个“平平无奇”的双滚动条

故事始于一个在 VitePress 博客中非常普遍的 UI 小瑕疵：当同一分类下的文章很多时，文章页的左侧边栏会出现两条滚动条——一条属于外部容器，另一条属于内部的导航列表。从用户体验的角度看，这无疑是多余且令人困惑的。

作为一名开发者，我的第一反应是：“简单！找到外层容器，给它一个 `overflow: hidden` 就行了。”

于是，我向我的 AI 结对编程助手 Gemini 下达了第一条指令。

## 第一回合：CSS 的“猫鼠游戏”

AI 助手迅速定位到了侧边栏的容器 `.VPSidebar`，并精准地添加了 `overflow: hidden`。问题似乎解决了。但紧接着，新的需求出现了：我们想让那个被保留下来的内部滚动条更美观一些，最好能和右侧的垂直分割线融为一体。

这开启了一系列“魔改”的序幕：

1.  **对齐尝试**：我们尝试将分割线（一个 `::after` 伪元素）的位置从 `right: -32px` 改为 `right: 0`，使其与滚动条对齐。
2.  **样式美化**：我们用 `::-webkit-scrollbar` 系列伪元素，成功地将滚动条变成了一条与分割线同色的细线。
3.  **“釜底抽薪”**：为了让细线滚动条永久可见，我们甚至想出了“恢复静态分割线，让滚动条在它下面滑动”的方案。

每一步，AI 都精准地执行了 CSS 的修改。然而，这些看似正确的修复，却在我的“老板”（用户）一次又一次的“我全都要”的需求下反复推翻，甚至一度回到了最初“两条滚动条”的尴尬局面。

最诡异的是，当我们想彻底隐藏内部滚动条，只保留外部滚动条时，无论我们用多么高优先级的 CSS 规则（甚至动用了 `!important`），那条内部的滚动条就像幽灵一样，顽固地存在着。

## 峰回路转：用户的直觉与 AI 的“失明”

在我与 AI 助手都陷入僵局时，我的“老板”提出了一个关键的猜想：“**这个滚动条会不会是同类文章聚合后固有的？**”

这句话如同一道闪电，击中了问题的核心。

我们一直以来的核心假设是：**滚动条是 CSS 的 `overflow` 属性在起作用**。但这个假设，让我们和 AI 一起钻进了牛角尖。

AI 助手立刻调整了策略，从“修复样式”转向“调查组件”。它找到了渲染这部分内容的 Vue 组件——`BlogRecommendArticle.vue`。果不其然，在组件的 `<style scoped>` 中，我们发现了这样一段代码：

```css
.catalog {
  max-height: calc(100vh - var(--vp-nav-height, 64px) - 64px);
  overflow-y: auto;
}
```

**真相大白**：这个滚动条根本不是从我们一直在修改的全局 `custom.css` 中产生的。它是这个 Vue 组件**自带的、被封装起来的**局部样式。难怪无论我们如何提高外部 CSS 的特异性，都无法彻底根除它。

这个滚动条，对于外部样式表来说，是“看不见”的。这也解释了为什么 AI 的诊断脚本（`evaluate_script`）一次又一次地报告“未找到任何滚动元素”——它确实没有在全局 DOM 中找到，因为它被组件的局部作用域“保护”起来了。

## 最终的解决方案

一旦找到了问题的根源，解决方案就变得异常简单：

在全局 `custom.css` 中，添加一条足够具体的规则，精准地覆盖掉组件的局部样式即可。

```css
/* 3. The component inside the inner container (.catalog) does not scroll */
.VPSidebar .sidebar .catalog {
  overflow-y: visible;
  max-height: none;
}
```

这条规则，让组件内部不再滚动，而是将其内容的高度完全展开，交由我们期望滚动的外部容器 `.VPSidebar` 去处理。至此，“内无外有”的最终目标完美达成。

## 结语与反思

这次奇妙的调试经历，给我带来了几点深刻的思考：

1.  **人类直觉的重要性**：在 AI 强大的分析和执行能力面前，人类开发者基于经验的“直觉”和“猜想”有时能起到拨开迷雾的关键作用。
2.  **理解工具的边界**：AI 助手在处理 CSS 和标准 DOM 时非常强大，但当问题涉及到现代前端框架的组件封装（如 Scoped CSS 或 Shadow DOM）时，它可能会“失明”。此时，我们需要帮助它调整侦察范围。
3.  **结对编程的真正含义**：这次经历不是简单的“我下令，AI 执行”，而是一次真正的“结对”。我们互相提供线索，不断修正彼此的假设，在看似山穷水尽时，由一方提出关键突破口，最终共同抵达终点。这或许就是人机协作最理想的模式。

下一次，当你和你的 AI 助手陷入困境时，不妨跳出当前的思维框架，大胆地提出你的猜想——也许，答案就在那里。
